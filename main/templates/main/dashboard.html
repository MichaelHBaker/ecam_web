{% extends 'base.html' %}
{% load static %}

{% block title %}ECAM Web{% endblock %}

{% block body_attributes %}data-page-type="dashboard"{% endblock %}

{% block content %}
<!-- Main Content -->
<main class="w3-container" style="margin-top: 80px;">
    <!-- Projects Section -->
    <div class="w3-bar w3-white w3-margin-bottom w3-bottombar">
        <button class="w3-bar-item w3-button section-button" data-action="toggle-section" data-section="projects">
            <i class="bi bi-chevron-right"></i> Projects
        </button>
        <!-- Standard W3.CSS dropdown with no custom classes -->
        <div class="w3-dropdown-hover">
            <button class="w3-button">
                <i class="bi bi-three-dots-vertical"></i>
            </button>
            <div class="w3-dropdown-content w3-bar-block w3-card">
                <a href="#" class="w3-bar-item w3-button" data-action="filter-projects">
                    <i class="bi bi-funnel"></i> Filter Projects
                </a>
                <a href="#" class="w3-bar-item w3-button" data-action="add-project">
                    <i class="bi bi-plus-lg"></i> Add Project
                </a>
            </div>
        </div>
    </div>
    <div class="w3-container w3-hide" data-content="projects">
        <div class="tree-container">

            <div id="projects-root" class="tree-item" data-id="root" data-type="root">
                <div class="node-row" style="display: flex; align-items: center; width: 100%; position: relative;">
                  <button class="toggle-btn" style="background: none; border: none; padding: 4px; cursor: pointer; margin-right: 4px;" aria-expanded="false" type="button" data-action="toggle">
                    <i class="bi bi-chevron-right"></i>
                  </button>
                  <div style="display: flex; align-items: center;">All Projects</div>
                </div>
                <div class="children-container w3-hide">
                  <div class="loading-indicator w3-padding w3-hide">
                    <div class="w3-center"><i class="bi bi-arrow-repeat w3-spin"></i> Loading...</div>
                  </div>
                  <div class="children-wrapper w3-margin-top">
                    <!-- Projects will be loaded here dynamically -->
                  </div>
                </div>
            </div>

            <div class="w3-center w3-padding-16 w3-hide">
                <i class="bi bi-arrow-repeat w3-spin"></i> Loading projects...
            </div>
            <div class="w3-panel w3-pale-yellow w3-hide">
                <p>No projects found. Create a new project to get started.</p>
            </div>
        </div>
    </div>
            
    <!-- Measurements Section -->
    <div class="w3-bar w3-white w3-margin-bottom w3-bottombar">
        <button class="w3-bar-item w3-button section-button" data-action="toggle-section" data-section="measurements">
            <i class="bi bi-chevron-right"></i> Measurements
        </button>
    </div>
    <div class="w3-container w3-hide" data-content="measurements">
        <div class="w3-panel w3-pale-blue">
            <p>Measurement data will appear here</p>
        </div>
    </div>

    <!-- Data Section -->
    <div class="w3-bar w3-white w3-margin-bottom w3-bottombar">
        <button class="w3-bar-item w3-button section-button" data-action="toggle-section" data-section="data">
            <i class="bi bi-chevron-right"></i> Data
        </button>
    </div>
    <div class="w3-container w3-hide" data-content="data">
        <div class="w3-panel w3-pale-blue">
            <p>Data management tools will appear here</p>
        </div>
    </div>

    <!-- Models Section -->
    <div class="w3-bar w3-white w3-margin-bottom w3-bottombar">
        <button class="w3-bar-item w3-button section-button" data-action="toggle-section" data-section="models">
            <i class="bi bi-chevron-right"></i> Models
        </button>
    </div>
    <div class="w3-container w3-hide" data-content="models">
        <div class="w3-panel w3-pale-blue">
            <p>Models will be displayed here</p>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
<script type="module" src="{% static 'main/js/page/dashboard.js' %}"></script>
{% endblock %}